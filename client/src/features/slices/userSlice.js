import { createSlice } from '@reduxjs/toolkit'

const defaultImg = `data:image/jpeg;base64,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`

const userSlice = createSlice({
    name: 'user',
    initialState: {user: JSON.parse(localStorage.getItem('profile-data'))?.user || null},
    reducers: {
        logIn: (state, {payload}) => {
            localStorage.setItem('profile-data', JSON.stringify(payload))
            state.user = {...payload.user, picture: payload.user.picture || defaultImg}
        },
        logOut: (state) => {
            state.user = null
            localStorage.removeItem('profile-data')
        },
        updateImage: (state, {payload}) => {
            state.user.picture = payload
            return state
        }
    }
})

export const { logIn, logOut, updateImage } = userSlice.actions
export default userSlice.reducer